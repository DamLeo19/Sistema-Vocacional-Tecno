{
  "paths": {
    "/api/borrar_usuario": {
      "delete": {
        "summary": "API para eliminar usuario con id y nombre",
        "description": "Elimina un usuario específico de la base de datos si coincide el ID de usuario y el nombre proporcionados. La API también eliminará los resultados del usuario eliminado",
        "parameters": [
          {
            "in": "query",
            "name": "usuarioid",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID del usuario."
          },
          {
            "in": "query",
            "name": "nombres",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Nombre del usuario."
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario eliminado con éxito.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "message": {
                      "type": "string",
                      "example": "Usuario eliminado con éxito."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "No se encontró un usuario con ese ID y nombre o faltan parámetros.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "message": {
                      "type": "string",
                      "example": "No se encontró un usuario con ese ID y nombre."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error al ejecutar la consulta o error de conexión.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "message": {
                      "type": "string",
                      "example": "Error al ejecutar la consulta."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/reporte": {
      "get": {
        "summary": "API para mostrar los resultados según el Id del usuario",
        "description": "Muestra todos los resultados asociados a un usuario específico basándose en su ID.",
        "parameters": [
          {
            "in": "query",
            "name": "usuarioid",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "ID del usuario."
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados encontrados para el usuario.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "resultadoid": {
                            "type": "integer",
                            "example": 1
                          },
                          "usuarioid": {
                            "type": "integer",
                            "example": 1
                          },
                          "puntuacion": {
                            "type": "integer",
                            "example": 85
                          },
                          "fecha": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-09-15T12:34:56Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Falta el parámetro usuarioid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "message": {
                      "type": "string",
                      "example": "No se encontraron resultados para este usuario."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error de conexión o error al ejecutar la consulta.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "message": {
                      "type": "string",
                      "example": "Error al ejecutar la consulta."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/intereses_usuario": {
      "get": {
        "summary": "Obtener todas las relaciones de intereses de usuarios",
        "description": "Devuelve todas las relaciones entre usuarios e intereses.",
        "responses": {
          "200": {
            "description": "Relaciones obtenidas con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "UsuarioID": {
                        "type": "integer",
                        "example": 1
                      },
                      "InteresID": {
                        "type": "integer",
                        "example": 2
                      },
                      "FechaRegistro": {
                        "type": "string",
                        "example": "2024-10-10T12:34:56Z"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear una nueva relación de interés para un usuario",
        "description": "Crea una nueva relación entre un usuario y un interés.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "UsuarioID": {
                    "type": "integer",
                    "example": 1
                  },
                  "InteresID": {
                    "type": "integer",
                    "example": 2
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Relación creada exitosamente.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Relación creada"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/intereses": {
      "get": {
        "summary": "Obtener todos los intereses",
        "description": "Devuelve todos los intereses disponibles.",
        "responses": {
          "200": {
            "description": "Intereses obtenidos con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "InteresID": {
                        "type": "integer",
                        "example": 1
                      },
                      "DescripcionInteres": {
                        "type": "string",
                        "example": "Deporte"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear un nuevo interés",
        "description": "Crea un nuevo interés con una descripción proporcionada.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "DescripcionInteres": {
                    "type": "string",
                    "example": "Deporte"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Interés creado exitosamente.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Interés creado"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/roles": {
      "get": {
        "summary": "Obtener todos los roles",
        "description": "Devuelve todos los roles disponibles.",
        "responses": {
          "200": {
            "description": "Roles obtenidos con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "RolID": {
                        "type": "integer",
                        "example": 1
                      },
                      "Nombre": {
                        "type": "string",
                        "example": "Admin"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear un nuevo rol",
        "description": "Crea un nuevo rol con un nombre proporcionado.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "Nombre": {
                    "type": "string",
                    "example": "Admin"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Rol creado exitosamente.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Rol creado"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/usuarios": {
      "get": {
        "summary": "Obtener todos los usuarios",
        "description": "Devuelve todos los usuarios registrados.",
        "responses": {
          "200": {
            "description": "Usuarios obtenidos con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "UsuarioID": {
                        "type": "integer",
                        "example": 1
                      },
                      "Nombres": {
                        "type": "string",
                        "example": "Juan"
                      },
                      "Apellidos": {
                        "type": "string",
                        "example": "Pérez"
                      },
                      "Email": {
                        "type": "string",
                        "example": "juan@example.com"
                      },
                      "RolID": {
                        "type": "integer",
                        "example": 1
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Crear un nuevo usuario",
        "description": "Crea un nuevo usuario con los datos proporcionados.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "Nombres": {
                    "type": "string",
                    "example": "Juan"
                  },
                  "Apellidos": {
                    "type": "string",
                    "example": "Pérez"
                  },
                  "Email": {
                    "type": "string",
                    "example": "juan@example.com"
                  },
                  "Contrasena": {
                    "type": "string",
                    "example": "password123"
                  },
                  "RolID": {
                    "type": "integer",
                    "example": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario creado exitosamente.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Usuario creado"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/usuarios/login": {
      "post": {
        "summary": "Autenticar un usuario",
        "description": "Autentica un usuario utilizando el correo y contraseña.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "Email": {
                    "type": "string",
                    "example": "juan@example.com"
                  },
                  "Contrasena": {
                    "type": "string",
                    "example": "password123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Autenticación exitosa.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Autenticación exitosa"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Credenciales incorrectas.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Credenciales incorrectas"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/registrar_respuesta.php": {
      "post": {
        "tags": ["Respuestas"],
        "summary": "Registrar respuesta de un usuario",
        "description": "Registra una respuesta de un usuario seleccionando una opción",
        "operationId": "registrarRespuesta",
        "requestBody": {
          "description": "Datos necesarios para registrar la respuesta",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "OpcionID": {
                    "type": "integer",
                    "description": "ID de la opción seleccionada",
                    "example": 2
                  },
                  "UsuarioID": {
                    "type": "integer",
                    "description": "ID del usuario que responde",
                    "example": 1
                  }
                },
                "required": ["OpcionID", "UsuarioID"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Respuesta registrada exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Respuesta registrada exitosamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos incompletos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Datos incompletos"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/calcular_resultado.php": {
    "post": {
      "tags": ["Resultados"],
      "summary": "Calcular y almacenar resultados de las pruebas",
      "description": "Calcula los resultados de las pruebas en función de las respuestas del usuario y almacena los resultados.",
      "operationId": "calcularResultado",
      "requestBody": {
        "description": "Datos necesarios para calcular el resultado",
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "UsuarioID": {
                  "type": "integer",
                  "description": "ID del usuario para el que se calculan los resultados",
                  "example": 1
                }
              },
              "required": ["UsuarioID"]
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resultado calculado y almacenado correctamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Resultado calculado y almacenado correctamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos incompletos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Datos incompletos"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No se encontraron respuestas para este usuario",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "No se encontraron respuestas para este usuario"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "example": "Error interno del servidor"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  }
}
